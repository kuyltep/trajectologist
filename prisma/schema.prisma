
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User{
  id String @unique @id @default(uuid())
  login String @unique
  password String
  firstName String
  lastName String
  professions Profession[] @relation("user-profession")
  user_competencies UserCompetency[]
}

model Competency {
  id String @id @unique @default(uuid())
  name String @unique
  steps Step[] @relation("step-competency")
  users_competency UserCompetency[]
  profession Profession[] @relation("competency-profession")
}

model UserCompetency {
  id String @unique @id @default(uuid())
  competency Competency @relation(fields: [competency_id], references: [id])
  competency_id String
  user User @relation(references: [id], fields: [userId])
  userId String
  is_completed Boolean @default(false)
  steps Step[]
}

model Profession {
  id String @unique @id @default(uuid())
  name String @unique
  competencies Competency[] @relation("competency-profession")
  users User[] @relation("user-profession")
}

model Step {
  id String @unique @id @default(uuid())
  name String
  description String
  competency Competency @relation(name: "step-competency", fields: [competency_id], references: [id])
  competency_id String
  users_competencies UserCompetency[]
}